<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mirage Park - Holos Login</title>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics-compat.js"></script>
    <style>
        /* --- Basic Reset & General Styles --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #121212; /* Dark background */
            color: #fff; /* Light text */
            min-height: 100vh; /* Full viewport height */
            padding: 20px; /* Padding around the page */
            display: flex; /* Use flexbox for centering login */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            position: relative; /* Needed for absolute positioning */
        }

        /* --- Login Section Styles --- */
        .login-section {
            text-align: center;
            padding: 30px;
            background-color: #1a1a1a;
            border-radius: 10px;
            border: 1px solid #39c0ed;
            /* display: block; /* Visible by default */ */
        }

        .login-title {
             font-size: 2rem;
             margin-bottom: 1.5rem;
             color: #39c0ed;
        }

        .input {
            background: #222;
            border: 1px solid #333;
            padding: 12px;
            margin: 10px 5px; /* Reduced horizontal margin */
            width: calc(50% - 12px); /* Adjust width for two inputs side-by-side */
            min-width: 150px; /* Minimum width */
            color: #fff;
            border-radius: 5px;
            font-size: 1rem;
        }

        .login-btn {
            background-color: #39c0ed; /* Blue background */
            padding: 12px 25px;
            color: #fff; /* White text */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            margin-top: 15px; /* Space above button */
            width: calc(100% - 10px); /* Make button wider */
        }

        .login-btn:hover {
            background-color: #25a7c7; /* Darker blue on hover */
        }

        /* --- Holos Content Styles (Initially Hidden) --- */
        .holos-content-wrapper {
            display: none; /* Hidden by default, shown after login */
            width: 100%;
            max-width: 1200px; /* Max width for content */
            margin: 0 auto; /* Center the container */
            padding: 20px;
            padding-top: 70px; /* Extra padding at the top to avoid overlap with back button */
            box-sizing: border-box;
            text-align: center; /* Ensure title is centered */
        }

        /* Back Button Styling */
        .back-btn {
            position: absolute; /* Position relative to the body/wrapper */
            top: 20px;
            left: 20px;
            background-color: #ff6f61; /* Changed color for distinction */
            padding: 10px 15px;
            color: #fff;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            z-index: 10;
        }

        .back-btn:hover {
            background-color: #e55e4d;
        }

        /* Page Title Styling */
        .title {
            font-size: 3rem;
            margin-bottom: 2rem;
            color: #39c0ed; /* Blue title color */
        }

        /* Character Grid Layout */
        .character-grid {
            display: grid;
            /* Using the original minmax for responsiveness */
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); /* Responsive grid */
            gap: 2rem; /* Space between grid items */
            margin-top: 2rem;
            /* Grid items align to the start by default, allowing different heights */
            align-items: start;
        }

        /* Individual Character Slot Styling */
        .character-slot {
            background-color: #1a1a1a;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #39c0ed;
            text-align: left;
            display: flex; /* Flexbox enables content to determine height */
            flex-direction: column; /* Stack image and details vertically */
            gap: 1.5rem;
            /* No fixed height is set, so it expands vertically with content */
            /* overflow-wrap helps prevent long words from breaking layout */
            overflow-wrap: break-word;
            /* Ensure the flex container itself can grow */
             min-height: 0; /* Override potential browser defaults */
        }

        /* Character Image Styling */
        .character-image {
            width: 100%;
            max-width: 300px;
            height: auto; /* Maintain aspect ratio */
            min-height: 200px; /* Ensure a minimum image space */
            border-radius: 5px;
            display: block;
            margin: 0 auto; /* Center image */
            background-color: #222; /* Placeholder background */
            object-fit: cover; /* Cover the area nicely */
        }

        /* Character Details Wrapper */
        .character-details {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            /* flex-grow allows this section to take remaining space if needed, */
            /* but doesn't restrict the parent's vertical growth */
            flex-grow: 1;
             /* Ensure the flex item can grow */
            min-height: 0; /* Override potential browser defaults */
        }

        /* Character Name */
        .character-details h3 {
            color: #fff;
            margin-bottom: 0.25rem;
            font-size: 1.75rem;
            text-align: center;
        }

        /* Catchphrase Styling */
        .catchphrase {
            font-style: italic;
            color: #a0a0a0;
            text-align: center;
            margin-top: -0.75rem;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        /* Section Headings */
        .character-details h4 {
            color: #39c0ed;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #333;
            padding-bottom: 0.25rem;
        }

        /* Description Text */
        .description-text {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #ccc;
            /* Default white-space: normal allows text wrapping */
        }

        /* Ability/Passive Text */
        .ability-passive-text p {
             font-size: 0.95rem;
             line-height: 1.5;
             color: #ccc;
             margin-bottom: 0.25rem;
             /* Default white-space: normal allows text wrapping */
        }
         .ability-passive-text p strong {
            color: #ddd;
            display: block; /* Makes name appear on its own line */
            margin-bottom: 0.1rem;
         }
         .ability-passive-text ul {
            list-style: disc;
            padding-left: 20px; /* Indent list items */
            margin-top: 0.25rem;
         }
         .ability-passive-text li {
             margin-bottom: 0.15rem;
         }

        /* Stats List Styling */
        .stats-list {
            list-style: none; /* Remove default bullets */
            padding: 0;
            font-size: 0.95rem;
            color: #ccc;
        }
        .stats-list li {
            margin-bottom: 0.3rem;
            /* Default white-space: normal allows text wrapping */
        }
        .stats-list li strong {
            color: #ddd;
            min-width: 80px; /* Align stat values */
            display: inline-block; /* Allows min-width */
        }

    </style>
</head>
<body>

    <div class="login-section" id="login-section">
        <h2 class="login-title">Mirage Park Access</h2>
        <input type="text" id="username" class="input" placeholder="Username" />
        <input type="password" id="password" class="input" placeholder="Password" />
        <button class="login-btn" onclick="login()">Login</button>
    </div>

    <div class="holos-content-wrapper" id="holos-content">
        <a href="index.html" class="back-btn" id="back-or-logout-btn">&larr; Back</a>
        <h1 class="title">Holos</h1>
        <div class="character-grid">
            <div class="character-slot">
                <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Oakwell" alt="Oakwell" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                <div class="character-details">
                    <h3>Oakwell</h3>
                    <p class="catchphrase">"Oakswell that ends well"</p>
                    <h4>Description</h4>
                    <p class="description-text">Oakwell is one of the oldest members of the Mirage Crew, and an old friend of Mirage, and a caretaker of the forest. Oakwell is a very big fan of the Zen Garden, and almost always stays there. Oakwell is a swampy creature, made of mud, and tree bark. Oakwell swears to defend the forest with his life, and anyone who messes with it, or Oakwell's friends, will feel Oakwells wrath. Oakwell is one of 5 Holos who keep a pet, with Oakwells pet being Flowo. Oakwell is the reason Flowo even exists; when Oakwell kept a special flower so safe, it gained sentience. Oakwell premiers in episode 24, "Swampy Adventures". Oakwell can be described as loyal, caring, and overprotecting, yet fierce and aggressive to anyone who harms the environment or his friends. Oakwell is closest to: Flowo, Mirage, Grekka, and Reef, and dislikes: Kole and Clover.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Thorn Trap</strong></p><p>Bring Brambles up out of the ground to make a trap. These traps last 120 seconds and affect any Holo or Animatronic who steps on it. Takes 5 seconds to activate after using the ability. Cooldown: 60s.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Heart of Oak</strong></p><p>Oakwell passively regenerates minor health over time. He heals one heart every 8 nights (if health is not full).</p></div>
                    <h4>Stats</h4>
                    <ul class="stats-list"><li><strong>Energy:</strong> 50</li><li><strong>Health:</strong> 2</li><li><strong>Speed:</strong> 2m/s</li><li><strong>Agility:</strong> 50</li><li><strong>Sound:</strong> 80</li><li><strong>Stealth:</strong> 0</li><li><strong>Smarts:</strong> 10</li><li><strong>Strength:</strong> 8</li><li><strong>Resistance:</strong> 8</li></ul>
                </div>
            </div>
            <div class="character-slot">
                <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Pinedo" alt="Pinedo" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                <div class="character-details">
                    <h3>Pinedo</h3>
                    <p class="catchphrase">"Heads up... or off!"</p>
                    <h4>Description</h4>
                    <p class="description-text">Pinedo doesn't like to be seen; often described as shy, she is rarely seen with the Mirage Crew. She's always nervous about losing her head, quite literally. Being detached from her body, she uses her third arm to hold onto it. Pinedo premiered in episode 36 - "Careful what you wish for". Pinedo doesn't like coming up on stage often, but tends to be made to on weekend shows. She is often described as shy, anxious, and nervous, and shows kids it's okay to be worried, as she gets over it in every episode she appears in. Pinedo is friends with Rubix, and Ace, but dislikes Rica.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Detached Head</strong></p><p>This Holo can throw her head away from animatronics, making them lose interest in her. However, she becomes a sitting duck, waiting for her body to come get her. Cooldown: 50s.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Headless Fear</strong></p><p>This Holo drops her head for 3 seconds when seen for the first time each night, making her unable to move for this period.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 100</li><li><strong>Health:</strong> 4</li><li><strong>Speed:</strong> 3m/s</li><li><strong>Agility:</strong> 20</li><li><strong>Sound:</strong> 30</li><li><strong>Stealth:</strong> 60</li> <li><strong>Smarts:</strong> 6</li><li><strong>Strength:</strong> 2</li><li><strong>Resistance:</strong> 5</li></ul>
                </div>
            </div>
             <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Chester" alt="Chester" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Chester</h3>
                    <p class="catchphrase">"What's inside is mine."</p>
                    <h4>Description</h4>
                    <p class="description-text">Chester is not one to say much unless it aids him, and is quite a greedy one, always fighting over anything, be it bottlecaps or gold. Chester never shares and often upsets a lot of the other Holos. Chester is quite cranky and has been around the Mirage Crew since episode 1, but didn't get his first episode staring him until episode 33 - "The Bottlecap Thief.". Chester is easily described as rude, greedy, and ignorant, and is a good example of what not to be, as Chester never learns to share. Chester likes Pinedo as he sees her as a free source of things, and dislikes Flash and Lanberd, who keep trying to stop Chester from stealing.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Disguise</strong></p><p>Chester can tuck in his arms, disguising himself as a prop for 5 seconds, making all animatronics lose interest in him. Cooldown: 60s</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Greedy</strong></p><p>Gain 2x tickets from all sources during nights. Chester also has a small chance to find extra tickets when opening containers or completing certain tasks.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 150</li><li><strong>Health:</strong> 2</li><li><strong>Speed:</strong> 1m/s</li><li><strong>Agility:</strong> 60</li><li><strong>Sound:</strong> 80</li><li><strong>Stealth:</strong> 30</li><li><strong>Smarts:</strong> 0</li><li><strong>Strength:</strong> 9</li><li><strong>Resistance:</strong> 10</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Morka" alt="Morka" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Morka</h3>
                     <p class="catchphrase">"Going up!"</p>
                    <h4>Description</h4>
                    <p class="description-text">Morka is lanky and surprisingly agile, using his long limbs to traverse the environment in unconventional ways. He's easily startled but quick to react.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Launch</strong></p><p>This holo can use his long arms to launch himself vertically or horizontally a short distance, allowing access to high places or quick escapes.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Panic</strong></p><p>When all tasks are completed or when an animatronic is very close, Morka gains a temporary burst of speed for 5 seconds.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 100</li><li><strong>Health:</strong> 2</li><li><strong>Speed:</strong> 4m/s</li><li><strong>Agility:</strong> 5</li><li><strong>Sound:</strong> 70</li><li><strong>Stealth:</strong> 15</li><li><strong>Smarts:</strong> 3</li><li><strong>Strength:</strong> 3</li><li><strong>Resistance:</strong> 0</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Ace" alt="Ace" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Ace</h3>
                     <p class="catchphrase">"Feeling lucky?"</p>
                    <h4>Description</h4>
                    <p class="description-text">Ace is a wildcard, a gambler whose abilities reflect his unpredictable nature. His face changes, altering his stats and capabilities moment to moment.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: New Face</strong></p><p>Randomly switch between 6 faces, each providing a different temporary stat boost or effect for 20 seconds:</p><ul><li>+10 Smarts (Task efficiency)</li><li>+10 Strength (Interaction force)</li><li>+10 Resistance (Damage reduction)</li><li>+1 Speed (Movement)</li><li>+50 Agility (Maneuverability)</li><li>-50 Sound (Quieter movement)</li></ul></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Patience</strong></p><p>Ability cooldown goes down 2x faster while Ace is standing still or performing a task.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 200</li><li><strong>Health:</strong> 3</li><li><strong>Speed:</strong> 3m/s</li><li><strong>Agility:</strong> 20</li><li><strong>Sound:</strong> 80</li><li><strong>Stealth:</strong> 20</li><li><strong>Smarts:</strong> 0 (Base)</li><li><strong>Strength:</strong> 0 (Base)</li><li><strong>Resistance:</strong> 0 (Base)</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Reef" alt="Reef" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Reef</h3>
                     <p class="catchphrase">"Don't make waves."</p>
                    <h4>Description</h4>
                    <p class="description-text">Reef is a water-themed Holo, calm and resilient, but capable of unleashing aquatic fury when provoked. He excels in watery environments.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Sea’s Wrath</strong></p><p>When hit, the animatronic that hurt Reef is drenched, slowing their movement and slightly impairing their sensors for 10 seconds. This effect has a cooldown.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Waterproof Gift</strong></p><p>This Holo cannot be hurt or significantly slowed by water-based hazards. Moves slightly faster in water.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 100</li><li><strong>Health:</strong> 4</li><li><strong>Speed:</strong> 2m/s</li><li><strong>Agility:</strong> 50</li><li><strong>Sound:</strong> 10</li><li><strong>Stealth:</strong> 40</li><li><strong>Smarts:</strong> 2</li><li><strong>Strength:</strong> 4</li><li><strong>Resistance:</strong> 0 (Except water)</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Clover" alt="Clover" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Clover</h3>
                     <p class="catchphrase">"Luck of the draw."</p>
                    <h4>Description</h4>
                    <p class="description-text">Small, quiet, and incredibly lucky, Clover relies on stealth and good fortune to survive. Often found hiding or digging.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Burrow</strong></p><p>Dig into the ground (soft surfaces only), becoming completely hidden and undetectable for up to 15 seconds. Cannot move while burrowed.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Lucky Leaf</strong></p><p>When doing a task, have a 25% chance to complete it instantly. Also has a small chance to avoid triggering traps.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 0 (Uses luck?)</li><li><strong>Health:</strong> 2</li><li><strong>Speed:</strong> 0m/s (Relies on Burrow/Stealth)</li><li><strong>Agility:</strong> 0</li><li><strong>Sound:</strong> 5</li><li><strong>Stealth:</strong> 75</li><li><strong>Smarts:</strong> 0</li><li><strong>Strength:</strong> 0</li><li><strong>Resistance:</strong> 0</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Flash" alt="Flash" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Flash</h3>
                     <p class="catchphrase">"Caught you!"</p>
                    <h4>Description</h4>
                    <p class="description-text">Flash uses light-based abilities, acting as a mobile watchman. He can illuminate areas or stun threats, but isn't very subtle.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Blacklight Mode</strong></p><p>When used, for one minute, Flash emits a blacklight revealing hidden clues, paths, or items within a short radius. Also briefly stuns certain types of animatronics caught directly in the initial burst.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Watcher</strong></p><p>When doing a task, Flash automatically 'sees' (gets a visual indicator of) every nearby animatronic within 15 meters, even through walls.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 150</li><li><strong>Health:</strong> 3</li><li><strong>Speed:</strong> 3m/s</li><li><strong>Agility:</strong> 50</li><li><strong>Sound:</strong> 80</li><li><strong>Stealth:</strong> 0</li><li><strong>Smarts:</strong> 5</li><li><strong>Strength:</strong> 5</li><li><strong>Resistance:</strong> 0</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Phantasma+(TV)" alt="Phantasma (TV Form)" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Phantasma (TV Form)</h3>
                     <p class="catchphrase">"Static cling."</p>
                    <h4>Description</h4>
                    <p class="description-text">Phantasma exists between states. In TV form, it's solid but emits an aura that interferes with nearby electronics and animatronics.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Form Change</strong></p><p>Switches to ghost form. Takes 3 seconds during which Phantasma is vulnerable.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Electronic Disturbance</strong></p><p>Slows down any animatronics within 2 meters. Slightly interferes with electronic-based tasks performed by other Holos nearby.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 100</li><li><strong>Health:</strong> 3</li><li><strong>Speed:</strong> 2m/s</li><li><strong>Agility:</strong> 20</li><li><strong>Sound:</strong> 70</li><li><strong>Stealth:</strong> 0</li><li><strong>Smarts:</strong> 7</li><li><strong>Strength:</strong> 7</li><li><strong>Resistance:</strong> 7</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Phantasma+(Ghost)" alt="Phantasma (Ghost Form)" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Phantasma (Ghost Form)</h3>
                     <p class="catchphrase">"Boo."</p>
                    <h4>Description</h4>
                    <p class="description-text">In Ghost form, Phantasma is incorporeal, fast, and silent, perfect for scouting or escaping, but unable to interact physically.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Form Change</strong></p><p>Switches to TV form. Takes 1 second. Can be initiated near specific electronic objects to 'possess' them briefly.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Bodiless</strong></p><p>Allows you to go through some objects (doors, grates, certain walls). Cannot interact with tasks or items. Animatronics have difficulty detecting this form.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 150 (Drains over time)</li><li><strong>Health:</strong> 3 (Takes no damage in this form, but energy drains faster if near threats)</li><li><strong>Speed:</strong> 4m/s</li><li><strong>Agility:</strong> 50</li><li><strong>Sound:</strong> 0</li><li><strong>Stealth:</strong> 60</li><li><strong>Smarts:</strong> 1</li><li><strong>Strength:</strong> N/A</li><li><strong>Resistance:</strong> N/A</li></ul>
                </div>
            </div>
             <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Lanberd" alt="Lanberd" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Lanberd</h3>
                     <p class="catchphrase">"Light the way."</p>
                    <h4>Description</h4>
                    <p class="description-text">Lanberd is a living lantern, providing light and warmth. He's not fast, but his embers can create hazards or illuminate paths.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Embers</strong></p><p>Leave a pile of embers on the ground that glows brightly for 1 minute. Animatronics that step on embers are briefly slowed and alerted.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Well-lit</strong></p><p>In a 3 meter radius around you, darkness effects are negated, and stealthy animatronics are slightly easier to detect.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 200</li><li><strong>Health:</strong> 2</li><li><strong>Speed:</strong> 2m/s</li><li><strong>Agility:</strong> 50</li><li><strong>Sound:</strong> 20</li><li><strong>Stealth:</strong> 0</li><li><strong>Smarts:</strong> 2</li><li><strong>Strength:</strong> 2</li><li><strong>Resistance:</strong> 4</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Fruzo" alt="Fruzo" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Fruzo</h3>
                     <p class="catchphrase">"Have a berry good time!"</p>
                    <h4>Description</h4>
                    <p class="description-text">Fruzo is a plant-based Holo focused on support and growth. He can share energy and use healing properties in unique ways.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Berry Sharing</strong></p><p>Send a berry to another Holo within 15 meters, restoring a small amount of their energy instantly.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Fertilizer</strong></p><p>When healing (from items or abilities), instead of it going to health, it boosts Fruzo's energy regeneration rate temporarily.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 200</li><li><strong>Health:</strong> 1</li><li><strong>Speed:</strong> 3m/s</li><li><strong>Agility:</strong> 33.33</li> <li><strong>Sound:</strong> 0</li><li><strong>Stealth:</strong> 60</li><li><strong>Smarts:</strong> 2</li><li><strong>Strength:</strong> 1</li><li><strong>Resistance:</strong> 0</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Claws" alt="Claws" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Claws</h3>
                     <p class="catchphrase">"What'll it be?"</p>
                    <h4>Description</h4>
                    <p class="description-text">Modeled after a claw machine, Claws uses random chance to grab items, offering unpredictable utility but consuming energy quickly.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Claw Draw</strong></p><p>Get a random item (e.g., speed boost, temporary shield, noise maker, small heal, dud). Consumes significant energy.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Pure Rush</strong></p><p>Positive item effects obtained by Claws last 75% as long, but negative item effects also last 75% as long.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 50 (Regens slowly, relies on items/berries)</li><li><strong>Health:</strong> 3</li><li><strong>Speed:</strong> 2m/s</li><li><strong>Agility:</strong> 100</li><li><strong>Sound:</strong> 60</li><li><strong>Stealth:</strong> 20</li><li><strong>Smarts:</strong> 0</li><li><strong>Strength:</strong> 0</li><li><strong>Resistance:</strong> 0</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Yarnos" alt="Yarnos" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Yarnos</h3>
                     <p class="catchphrase">"Let's unwind!"</p>
                    <h4>Description</h4>
                    <p class="description-text">Yarnos is made of yarn, constantly unraveling but using this to his advantage for speed and maneuverability.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Windup</strong></p><p>Pull on your tail to wind yourself up. Release to gain a massive burst of speed in a straight line for 2 seconds. Difficult to steer during the burst.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Unraveled</strong></p><p>This Holo is constantly being unraveled, leaving a faint trail of yarn. The faster Yarnos moves, the faster health depletes, but also the faster energy regenerates.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 125</li><li><strong>Health:</strong> 3 (Constantly depleting based on speed)</li><li><strong>Speed:</strong> 5m/s (Base)</li><li><strong>Agility:</strong> 100</li><li><strong>Sound:</strong> 0</li><li><strong>Stealth:</strong> 60</li><li><strong>Smarts:</strong> 6</li><li><strong>Strength:</strong> 10</li><li><strong>Resistance:</strong> 10</li></ul>
                </div>
            </div>
            <div class="character-slot">
                 <img class="character-image" src="https://placehold.co/300x200/1a1a1a/39c0ed?text=Zobo" alt="Zobo" onerror="this.src='https://placehold.co/300x200/1a1a1a/cccccc?text=Image+Not+Found';">
                 <div class="character-details">
                    <h3>Zobo</h3>
                     <p class="catchphrase">"Built different... mostly."</p>
                    <h4>Description</h4>
                    <p class="description-text">Zobo appears cobbled together from spare parts, making him somewhat unstable but surprisingly resilient and resourceful.</p>
                    <h4>Ability</h4>
                    <div class="ability-passive-text"><p><strong>Name: Regather</strong></p><p>This ability is only usable once every 80 tasks completed (cumulative across all Holos). Instantly regain full health and energy. Causes a loud noise upon activation.</p></div>
                    <h4>Passive</h4>
                    <div class="ability-passive-text"><p><strong>Name: Unstable</strong></p><p>This holo will randomly topple over if sprinting for too long (chance increases over time), causing a brief stun and loud noise. Has a higher base resistance to compensate.</p></div>
                    <h4>Stats</h4><ul class="stats-list"><li><strong>Energy:</strong> 150</li><li><strong>Health:</strong> 4</li><li><strong>Speed:</strong> 4m/s</li><li><strong>Agility:</strong> 40</li><li><strong>Sound:</strong> 5 (Increases significantly when toppling)</li><li><strong>Stealth:</strong> 20</li><li><strong>Smarts:</strong> 8</li><li><strong>Strength:</strong> 8</li><li><strong>Resistance:</strong> 8</li></ul>
                </div>
            </div>
        </div> </div> <script>
        // Import Firebase modules (CDN)
        // Note: These are already included in the <head>
        // const firebaseApp = firebase.app; // Already globally available via CDN script
        // const firestore = firebase.firestore; // Already globally available via CDN script
        // const analytics = firebase.analytics; // Already globally available via CDN script

        // --- Explanation of Login and Content Visibility Logic ---
        /*
        ### Understanding the Login and Visibility Logic (Integrated with Holos Page)

        1.  **Initial State (CSS & HTML):**
            * The HTML contains two main sections: `#login-section` and `#holos-content`.
            * By default, CSS hides the Holos content (`#holos-content { display: none; }`).
            * The login section (`#login-section`) is visible by default.

        2.  **Checking Login Status on Page Load (`checkLoginAndLoad` function):**
            * When the page loads (`window.onload`), `checkLoginAndLoad` runs.
            * It checks `localStorage` for `isLoggedIn` and `loggedInUsername`.
            * **If `isLoggedIn` is 'true'**:
                * It hides the login form (`#login-section`).
                * It shows the Holos content wrapper (`#holos-content`).
                * Changes the "Back" button to "Logout".
                * The `body`'s flexbox centering is removed for content flow.
            * **If `isLoggedIn` is not 'true'**:
                * It ensures the login form (`#login-section`) is visible.
                * The Holos content (`#holos-content`) remains hidden.
                * The `body`'s flexbox rules keep the login form centered.

        3.  **Login Process (`login` function):**
            * Called when the "Login" button is clicked.
            * Queries Firebase Firestore "Accounts" collection based on entered username.
            * **Password Check:** Compares entered password with stored password (plain text - INSECURE).
            * **If Credentials Match:**
                * Sets `isLoggedIn = true` and stores username.
                * Saves `isLoggedIn='true'` and username to `localStorage` for persistence.
                * Hides the login form (`#login-section`).
                * Shows the Holos content (`#holos-content`).
                * Updates the button to "Logout".
            * **If Credentials Don't Match:** Shows an alert; page remains in the login state.

        4. **Logout Process (`logout` function):**
            * Called when the "Logout" button is clicked.
            * Clears login status and username from `localStorage`.
            * Sets `isLoggedIn = false`.
            * Hides Holos content, shows login form.
            * Resets body centering.
            * Changes button back to "Back" (though it won't be visible until login).

        **In Summary:** The page requires login. It uses CSS for initial visibility, JavaScript and `localStorage` for login state persistence, and Firebase for credential verification. Successful login reveals the Holos grid and changes the navigation button to Logout. Logging out reverts the page to the initial login state.
        */
        // --- End of Explanation ---

        // --- Firebase Configuration ---
        // IMPORTANT: Replace with your actual Firebase config.
        const firebaseConfig = {
             apiKey: "AIzaSyC8923ceG_Hcp5k3v0qjO_yYgKEoXB4n_A", // Replace with your actual API key
            authDomain: "miragepark-1e12a.firebaseapp.com",
            projectId: "miragepark-1e12a",
            storageBucket: "miragepark-1e12a.appspot.com",
            messagingSenderId: "11545240206",
            appId: "1:11545240206:web:d36635f6db96aa49025fdf",
            measurementId: "G-K2KGDZ3Q17"
        };

        // --- Initialize Firebase ---
        let app;
        let db;
        let analyticsInstance; // Keep variable declaration
        try {
            // Check if Firebase is already initialized to avoid errors on hot-reloads
            if (!firebase.apps.length) {
                 app = firebase.initializeApp(firebaseConfig);
            } else {
                 app = firebase.app(); // Get the default app if already initialized
            }
            db = firebase.firestore();
            // Check if analytics is supported and initialize if needed
            if (firebase.analytics && typeof firebase.analytics === 'function') {
                 // analyticsInstance = firebase.analytics(); // Optional: Uncomment if using Analytics
                 console.log("Firebase Analytics potentially available.");
            } else {
                 console.log("Firebase Analytics not available or not included.");
            }
            console.log("Firebase initialized successfully.");
        } catch (error) {
            console.error("Error initializing Firebase:", error);
            alert("Could not initialize Firebase. Some features may not work.");
        }

        // --- Global Variables ---
        let loggedInUsername = localStorage.getItem('loggedInUsername') || "";
        let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';

        // --- Utility Functions ---
        async function ensureFirestoreReady() {
            // Check if db is initialized and accessible
            if (typeof db === 'undefined' || !db) {
                console.warn("Firestore not initialized, attempting re-initialization.");
                try {
                     // Ensure Firebase app is initialized first
                    if (!firebase.apps.length) {
                        app = firebase.initializeApp(firebaseConfig);
                        console.log("Firebase App re-initialized.");
                    } else {
                        app = firebase.app(); // Get existing app
                    }
                     // Now try to get Firestore instance
                    db = firebase.firestore();
                    if (!db) {
                        throw new Error("Firestore still not available after re-initialization attempt.");
                    }
                    console.log("Firestore service re-initialized successfully.");
                } catch (error) {
                    console.error("Failed to ensure Firestore readiness:", error);
                    alert("Database connection error. Please refresh the page.");
                    return null; // Indicate failure
                }
            }
             // Firestore seems available
            return db;
        }


        // --- UI Update Function ---
        function updateUIForLoginState(loggedIn) {
             const loginSection = document.getElementById('login-section');
             const holosContent = document.getElementById('holos-content');
             const bodyElement = document.body;
             const backOrLogoutBtn = document.getElementById('back-or-logout-btn');

             if (loggedIn) {
                 console.log(`Updating UI: User ${loggedInUsername} is logged in.`);
                 if(loginSection) loginSection.style.display = 'none';
                 if(holosContent) holosContent.style.display = 'block'; // Show Holos content
                 if(backOrLogoutBtn) {
                     backOrLogoutBtn.textContent = 'Logout'; // Change button text
                     backOrLogoutBtn.onclick = function() { logout(); return false; }; // Assign logout function
                     backOrLogoutBtn.href = '#'; // Prevent page jump
                 }
                 // Adjust body style for content view
                 bodyElement.style.justifyContent = 'flex-start';
                 bodyElement.style.alignItems = 'flex-start';
             } else {
                 console.log("Updating UI: User is not logged in.");
                 if(loginSection) loginSection.style.display = 'block'; // Show login form
                 if(holosContent) holosContent.style.display = 'none'; // Hide Holos content
                  if(backOrLogoutBtn) {
                     // Reset button to 'Back' state when logged out
                     backOrLogoutBtn.textContent = '← Back';
                     backOrLogoutBtn.onclick = null; // Remove logout function
                     backOrLogoutBtn.href = 'index.html'; // Point back to original target (adjust if needed)
                 }
                 // Ensure body centering for login form
                 bodyElement.style.justifyContent = 'center';
                 bodyElement.style.alignItems = 'center';
             }
        }


        // --- Initialization ---
        async function checkLoginAndLoad() {
            // No need to check firestoreDb here for initial UI update
            updateUIForLoginState(isLoggedIn); // Update UI based on localStorage status *first*
            // Now ensure Firestore is ready for subsequent actions (like login attempts)
            await ensureFirestoreReady();
        }

        // Run check on window load
        window.onload = checkLoginAndLoad;


        // --- Authentication ---
        async function login() {
            const firestoreDb = await ensureFirestoreReady();
            if (!firestoreDb) {
                 alert("Database connection error. Cannot log in.");
                 return;
            }

            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const enteredUsername = usernameInput.value.trim();
            const enteredPassword = passwordInput.value.trim(); // Get password value

            if (!enteredUsername || !enteredPassword) {
                alert("Please enter both username and password.");
                return;
            }

            console.log(`Attempting login for user: ${enteredUsername}`);

            try {
                const accountsRef = firestoreDb.collection("Accounts");
                // Query Firestore for the entered username
                const querySnapshot = await accountsRef.where("username", "==", enteredUsername).get();

                if (querySnapshot.empty) {
                    alert("No account found with that username.");
                    console.warn(`Login failed: Username ${enteredUsername} not found.`);
                    return;
                }

                let validCredentials = false;
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    // *** INSECURE: Plain text password comparison ***
                    // In a real app, use Firebase Authentication or compare hashed passwords securely server-side.
                    if (data.password === enteredPassword) {
                        validCredentials = true;
                        loggedInUsername = enteredUsername; // Store username globally
                        console.log(`Login successful for user: ${loggedInUsername}`);
                    } else {
                        console.warn(`Password mismatch for user ${enteredUsername}. Entered: '${enteredPassword}', Stored: '${data.password}'`);
                    }
                });

                if (validCredentials) {
                    isLoggedIn = true;
                    localStorage.setItem('loggedInUsername', loggedInUsername); // Persist username
                    localStorage.setItem('isLoggedIn', 'true'); // Persist login status
                    alert("Login successful!");
                    updateUIForLoginState(true); // Update UI to show Holos content
                    // Clear password field after successful login
                    if(passwordInput) passwordInput.value = '';
                } else {
                    alert("Invalid password.");
                    console.warn(`Login failed: Invalid password for user ${enteredUsername}.`);
                    // Clear password field after failed attempt
                     if(passwordInput) passwordInput.value = '';
                    // Do not clear username - allow user to re-try password
                    // updateUIForLoginState(false); // Ensure UI is in logged-out state (already is)
                }
            } catch (error) {
                console.error("Error retrieving account during login: ", error);
                alert("Error logging in. Please check the console and try again later.");
                 // Clear password field on error
                 if(passwordInput) passwordInput.value = '';
            }
        }
        // Make login function globally accessible for the button's onclick
        window.login = login;

        // --- Logout Function ---
        function logout() {
            console.log(`Logging out user: ${loggedInUsername}`);
            localStorage.removeItem('loggedInUsername');
            localStorage.removeItem('isLoggedIn');
            isLoggedIn = false;
            loggedInUsername = "";

            // Clear input fields on logout
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            if(usernameInput) usernameInput.value = '';
            if(passwordInput) passwordInput.value = '';


            updateUIForLoginState(false); // Update UI to show login form
            alert("You have been logged out.");
            // Optional: redirect to a login page or refresh if needed
            // window.location.reload();
        }
        // Make logout globally accessible (it's assigned via onclick in updateUIForLoginState)
        window.logout = logout;

    </script>

</body>
</html>
